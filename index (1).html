<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GearHead Profiles ‚Äî Find Your Mechanic</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Barlow+Condensed:wght@400;600;700&family=Barlow:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --black: #0a0a0a;
    --dark: #111111;
    --panel: #161616;
    --border: #2a2a2a;
    --orange: #FF5C00;
    --orange-dim: #cc4900;
    --yellow: #FFB800;
    --steel: #8a8a8a;
    --light: #e8e8e8;
    --white: #f5f5f5;
    --red: #cc2200;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--black);
    color: var(--white);
    font-family: 'Barlow', sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* NOISE TEXTURE OVERLAY */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E");
    pointer-events: none;
    z-index: 9999;
    opacity: 0.4;
  }

  /* ‚Äî‚Äî‚Äî HEADER ‚Äî‚Äî‚Äî */
  header {
    background: var(--black);
    border-bottom: 2px solid var(--orange);
    padding: 0 2rem;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 70px;
    position: sticky;
    top: 0;
    z-index: 100;
  }

  .logo {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .logo-icon {
    width: 40px;
    height: 40px;
    background: var(--orange);
    clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
  }

  .logo-text {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 2rem;
    letter-spacing: 3px;
    color: var(--white);
  }

  .logo-text span { color: var(--orange); }

  nav a {
    color: var(--steel);
    text-decoration: none;
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 600;
    font-size: 0.9rem;
    letter-spacing: 2px;
    text-transform: uppercase;
    margin-left: 2rem;
    transition: color 0.2s;
  }

  nav a:hover { color: var(--orange); }

  .btn-create {
    background: var(--orange);
    color: #000;
    border: none;
    padding: 10px 24px;
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 700;
    font-size: 0.95rem;
    letter-spacing: 2px;
    text-transform: uppercase;
    cursor: pointer;
    margin-left: 2rem;
    clip-path: polygon(8px 0%, 100% 0%, calc(100% - 8px) 100%, 0% 100%);
    transition: background 0.2s, transform 0.1s;
  }

  .btn-create:hover { background: var(--yellow); transform: scale(1.03); }

  /* ‚Äî‚Äî‚Äî HERO ‚Äî‚Äî‚Äî */
  .hero {
    position: relative;
    padding: 6rem 2rem 5rem;
    text-align: center;
    overflow: hidden;
  }

  .hero::before {
    content: 'GEARHEAD';
    position: absolute;
    font-family: 'Bebas Neue', sans-serif;
    font-size: clamp(8rem, 25vw, 22rem);
    color: rgba(255,92,0,0.04);
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    white-space: nowrap;
    pointer-events: none;
    letter-spacing: 10px;
  }

  .hero-eyebrow {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.85rem;
    letter-spacing: 5px;
    color: var(--orange);
    text-transform: uppercase;
    margin-bottom: 1rem;
  }

  .hero h1 {
    font-family: 'Bebas Neue', sans-serif;
    font-size: clamp(3rem, 8vw, 7rem);
    line-height: 0.95;
    letter-spacing: 4px;
    margin-bottom: 1.5rem;
  }

  .hero h1 em {
    font-style: normal;
    color: var(--orange);
    display: block;
  }

  .hero p {
    max-width: 560px;
    margin: 0 auto 2.5rem;
    color: var(--steel);
    font-size: 1.1rem;
    line-height: 1.6;
    font-weight: 300;
  }

  .hero-actions {
    display: flex;
    gap: 1rem;
    justify-content: center;
    flex-wrap: wrap;
  }

  .btn-primary {
    background: var(--orange);
    color: #000;
    border: none;
    padding: 16px 40px;
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 700;
    font-size: 1.1rem;
    letter-spacing: 3px;
    text-transform: uppercase;
    cursor: pointer;
    clip-path: polygon(12px 0%, 100% 0%, calc(100% - 12px) 100%, 0% 100%);
    transition: all 0.2s;
  }

  .btn-primary:hover { background: var(--yellow); transform: translateY(-2px); }

  .btn-secondary {
    background: transparent;
    color: var(--white);
    border: 1px solid var(--border);
    padding: 16px 40px;
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 600;
    font-size: 1.1rem;
    letter-spacing: 3px;
    text-transform: uppercase;
    cursor: pointer;
    transition: all 0.2s;
  }

  .btn-secondary:hover { border-color: var(--orange); color: var(--orange); }

  /* ‚Äî‚Äî‚Äî STATS BAR ‚Äî‚Äî‚Äî */
  .stats-bar {
    background: var(--orange);
    padding: 1rem 2rem;
    display: flex;
    justify-content: center;
    gap: 4rem;
    flex-wrap: wrap;
  }

  .stat {
    display: flex;
    flex-direction: column;
    align-items: center;
    color: #000;
  }

  .stat-number {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 2.2rem;
    letter-spacing: 2px;
    line-height: 1;
  }

  .stat-label {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.75rem;
    letter-spacing: 2px;
    text-transform: uppercase;
    font-weight: 700;
  }

  /* ‚Äî‚Äî‚Äî SECTION TITLE ‚Äî‚Äî‚Äî */
  .section-header {
    text-align: center;
    margin-bottom: 3rem;
  }

  .section-eyebrow {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.8rem;
    letter-spacing: 5px;
    color: var(--orange);
    text-transform: uppercase;
    margin-bottom: 0.5rem;
  }

  .section-title {
    font-family: 'Bebas Neue', sans-serif;
    font-size: clamp(2.5rem, 5vw, 4rem);
    letter-spacing: 3px;
  }

  /* ‚Äî‚Äî‚Äî PROFILE GRID ‚Äî‚Äî‚Äî */
  .profiles-section {
    padding: 5rem 2rem;
    max-width: 1400px;
    margin: 0 auto;
  }

  /* FILTER BAR */
  .filter-bar {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
    margin-bottom: 3rem;
    justify-content: center;
  }

  .filter-btn {
    background: transparent;
    border: 1px solid var(--border);
    color: var(--steel);
    padding: 8px 20px;
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 600;
    font-size: 0.85rem;
    letter-spacing: 2px;
    text-transform: uppercase;
    cursor: pointer;
    transition: all 0.2s;
  }

  .filter-btn.active, .filter-btn:hover {
    background: var(--orange);
    color: #000;
    border-color: var(--orange);
  }

  /* PROFILE CARDS */
  .profiles-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
    gap: 2px;
  }

  .profile-card {
    background: var(--panel);
    border: 1px solid var(--border);
    overflow: hidden;
    cursor: pointer;
    transition: transform 0.25s, border-color 0.25s;
    position: relative;
  }

  .profile-card:hover {
    transform: translateY(-4px);
    border-color: var(--orange);
    z-index: 2;
  }

  .profile-card:hover .card-overlay { opacity: 1; }

  .card-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(255,92,0,0.08), transparent);
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.25s;
  }

  .card-header {
    padding: 1.5rem;
    display: flex;
    gap: 1rem;
    align-items: flex-start;
    border-bottom: 1px solid var(--border);
    background: var(--dark);
  }

  .avatar {
    width: 72px;
    height: 72px;
    border-radius: 4px;
    object-fit: cover;
    border: 2px solid var(--orange);
    flex-shrink: 0;
    background: var(--border);
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Bebas Neue', sans-serif;
    font-size: 2rem;
    color: var(--orange);
  }

  .card-info { flex: 1; }

  .card-name {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 1.4rem;
    font-weight: 700;
    letter-spacing: 1px;
    line-height: 1;
    margin-bottom: 4px;
  }

  .card-role {
    color: var(--orange);
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.85rem;
    letter-spacing: 3px;
    text-transform: uppercase;
    font-weight: 600;
    margin-bottom: 6px;
  }

  .card-location {
    color: var(--steel);
    font-size: 0.85rem;
    display: flex;
    align-items: center;
    gap: 4px;
  }

  .experience-badge {
    background: var(--orange);
    color: #000;
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1.1rem;
    padding: 4px 10px;
    letter-spacing: 1px;
    margin-left: auto;
    align-self: flex-start;
    flex-shrink: 0;
    white-space: nowrap;
  }

  .card-skills {
    padding: 1rem 1.5rem;
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
    border-bottom: 1px solid var(--border);
  }

  .skill-tag {
    background: rgba(255,92,0,0.1);
    border: 1px solid rgba(255,92,0,0.25);
    color: var(--orange);
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.75rem;
    letter-spacing: 1px;
    text-transform: uppercase;
    padding: 3px 10px;
    font-weight: 600;
  }

  .card-gallery {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 2px;
    padding: 0;
  }

  .gallery-thumb {
    aspect-ratio: 1;
    background: var(--border);
    overflow: hidden;
  }

  .gallery-thumb img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s;
  }

  .profile-card:hover .gallery-thumb img { transform: scale(1.08); }

  .gallery-placeholder {
    width: 100%;
    height: 100%;
    background: repeating-linear-gradient(
      45deg,
      var(--border),
      var(--border) 2px,
      transparent 2px,
      transparent 12px
    );
    display: flex;
    align-items: center;
    justify-content: center;
    color: rgba(255,255,255,0.1);
    font-size: 1.5rem;
  }

  .card-footer {
    padding: 1rem 1.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .card-rating {
    display: flex;
    align-items: center;
    gap: 4px;
    color: var(--yellow);
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 700;
    font-size: 0.95rem;
  }

  .card-cta {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.8rem;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--orange);
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 4px;
  }

  /* ‚Äî‚Äî‚Äî MODAL OVERLAY ‚Äî‚Äî‚Äî */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.92);
    z-index: 1000;
    display: none;
    align-items: flex-start;
    justify-content: center;
    padding: 2rem 1rem;
    overflow-y: auto;
  }

  .modal-overlay.open { display: flex; }

  .modal {
    background: var(--dark);
    border: 1px solid var(--border);
    width: 100%;
    max-width: 820px;
    animation: slideUp 0.3s ease;
    position: relative;
    margin: auto;
  }

  @keyframes slideUp {
    from { transform: translateY(40px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }

  .modal-close {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: transparent;
    border: 1px solid var(--border);
    color: var(--steel);
    width: 36px;
    height: 36px;
    cursor: pointer;
    font-size: 1.2rem;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    z-index: 10;
  }

  .modal-close:hover { border-color: var(--orange); color: var(--orange); }

  /* ‚Äî‚Äî‚Äî CREATE PROFILE MODAL ‚Äî‚Äî‚Äî */
  .form-modal {
    max-width: 900px;
  }

  .modal-top-bar {
    background: var(--orange);
    padding: 1rem 1.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .modal-top-bar h2 {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 2rem;
    letter-spacing: 3px;
    color: #000;
  }

  .modal-body { padding: 2rem; }

  .form-section {
    margin-bottom: 2rem;
    padding-bottom: 2rem;
    border-bottom: 1px solid var(--border);
  }

  .form-section:last-child { border-bottom: none; }

  .form-section-title {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.8rem;
    letter-spacing: 4px;
    text-transform: uppercase;
    color: var(--orange);
    margin-bottom: 1.2rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .form-section-title::after {
    content: '';
    flex: 1;
    height: 1px;
    background: var(--border);
  }

  .form-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
  }

  .form-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
  }

  .form-group.full { grid-column: 1 / -1; }

  label {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.8rem;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--steel);
    font-weight: 600;
  }

  input[type="text"],
  input[type="email"],
  input[type="number"],
  input[type="tel"],
  select,
  textarea {
    background: var(--panel);
    border: 1px solid var(--border);
    color: var(--white);
    padding: 10px 14px;
    font-family: 'Barlow', sans-serif;
    font-size: 0.95rem;
    outline: none;
    transition: border-color 0.2s;
    width: 100%;
  }

  input:focus, select:focus, textarea:focus { border-color: var(--orange); }

  select option { background: var(--panel); }

  textarea { resize: vertical; min-height: 100px; }

  /* SPECIALTY CHECKBOXES */
  .checkbox-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 8px;
  }

  .checkbox-item {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px 14px;
    border: 1px solid var(--border);
    cursor: pointer;
    transition: all 0.2s;
    user-select: none;
  }

  .checkbox-item:hover { border-color: var(--orange); }

  .checkbox-item input[type="checkbox"] { display: none; }

  .checkbox-item.checked {
    background: rgba(255,92,0,0.1);
    border-color: var(--orange);
  }

  .check-box {
    width: 18px;
    height: 18px;
    border: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    font-size: 12px;
    color: var(--orange);
    background: transparent;
    transition: all 0.2s;
  }

  .checkbox-item.checked .check-box {
    border-color: var(--orange);
    background: var(--orange);
    color: #000;
  }

  .check-label {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.9rem;
    letter-spacing: 1px;
    font-weight: 600;
  }

  /* PHOTO UPLOAD */
  .photo-upload-main {
    width: 140px;
    height: 140px;
    border: 2px dashed var(--border);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: border-color 0.2s;
    background: var(--panel);
    flex-shrink: 0;
    position: relative;
    overflow: hidden;
  }

  .photo-upload-main:hover { border-color: var(--orange); }

  .photo-upload-main img {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .photo-upload-text {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.75rem;
    letter-spacing: 1px;
    color: var(--steel);
    text-align: center;
    margin-top: 8px;
  }

  .work-photos-grid {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: 8px;
  }

  .work-photo-upload {
    aspect-ratio: 1;
    border: 2px dashed var(--border);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: border-color 0.2s;
    background: var(--panel);
    position: relative;
    overflow: hidden;
  }

  .work-photo-upload:hover { border-color: var(--orange); }

  .work-photo-upload img {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .upload-icon { font-size: 1.5rem; opacity: 0.4; }
  .upload-num {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 0.8rem;
    color: var(--steel);
    letter-spacing: 1px;
  }

  .profile-photo-row {
    display: flex;
    gap: 1.5rem;
    align-items: flex-start;
  }

  .profile-photo-info {
    flex: 1;
  }

  .profile-photo-info p {
    color: var(--steel);
    font-size: 0.9rem;
    line-height: 1.6;
    margin-bottom: 1rem;
  }

  /* CERTIFICATIONS */
  .cert-tags {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    margin-top: 0.5rem;
  }

  .cert-tag {
    background: rgba(255,184,0,0.1);
    border: 1px solid rgba(255,184,0,0.3);
    color: var(--yellow);
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.8rem;
    letter-spacing: 1px;
    padding: 4px 12px;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 6px;
    cursor: pointer;
  }

  .cert-tag .remove { color: var(--steel); font-size: 0.7rem; }
  .cert-tag .remove:hover { color: var(--red); }

  .cert-input-row {
    display: flex;
    gap: 8px;
    margin-bottom: 8px;
  }

  .cert-input-row input { flex: 1; }

  .btn-add {
    background: transparent;
    border: 1px solid var(--orange);
    color: var(--orange);
    padding: 8px 16px;
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 700;
    font-size: 0.85rem;
    letter-spacing: 2px;
    text-transform: uppercase;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
  }

  .btn-add:hover { background: var(--orange); color: #000; }

  /* SUBMIT */
  .form-submit {
    display: flex;
    gap: 1rem;
    justify-content: flex-end;
    padding-top: 1rem;
    flex-wrap: wrap;
  }

  .btn-cancel {
    background: transparent;
    border: 1px solid var(--border);
    color: var(--steel);
    padding: 14px 32px;
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 600;
    font-size: 1rem;
    letter-spacing: 2px;
    text-transform: uppercase;
    cursor: pointer;
    transition: all 0.2s;
  }

  .btn-cancel:hover { border-color: var(--steel); color: var(--white); }

  .btn-publish {
    background: var(--orange);
    border: none;
    color: #000;
    padding: 14px 40px;
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 700;
    font-size: 1rem;
    letter-spacing: 3px;
    text-transform: uppercase;
    cursor: pointer;
    clip-path: polygon(10px 0%, 100% 0%, calc(100% - 10px) 100%, 0% 100%);
    transition: all 0.2s;
  }

  .btn-publish:hover { background: var(--yellow); }

  /* ‚Äî‚Äî‚Äî PROFILE VIEW MODAL ‚Äî‚Äî‚Äî */
  .view-modal-header {
    position: relative;
    background: var(--panel);
    padding: 2rem;
    display: flex;
    gap: 2rem;
    border-bottom: 2px solid var(--orange);
    align-items: flex-start;
  }

  .view-avatar {
    width: 110px;
    height: 110px;
    border-radius: 4px;
    object-fit: cover;
    border: 3px solid var(--orange);
    background: var(--border);
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Bebas Neue', sans-serif;
    font-size: 3rem;
    color: var(--orange);
    flex-shrink: 0;
  }

  .view-header-info { flex: 1; }

  .view-name {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 2.5rem;
    letter-spacing: 3px;
    line-height: 1;
    margin-bottom: 6px;
  }

  .view-role {
    color: var(--orange);
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 1rem;
    letter-spacing: 4px;
    text-transform: uppercase;
    font-weight: 700;
    margin-bottom: 10px;
  }

  .view-meta {
    display: flex;
    gap: 1.5rem;
    flex-wrap: wrap;
    color: var(--steel);
    font-size: 0.9rem;
  }

  .view-meta-item {
    display: flex;
    align-items: center;
    gap: 5px;
  }

  .view-exp-badge {
    position: absolute;
    top: 2rem;
    right: 2rem;
    background: var(--orange);
    color: #000;
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1.5rem;
    padding: 8px 16px;
    letter-spacing: 2px;
    text-align: center;
  }

  .view-exp-label {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.6rem;
    letter-spacing: 2px;
    text-transform: uppercase;
    display: block;
    margin-top: -4px;
    font-weight: 700;
  }

  .view-body { padding: 2rem; }

  .view-section { margin-bottom: 2rem; }

  .view-section-title {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.75rem;
    letter-spacing: 4px;
    color: var(--orange);
    text-transform: uppercase;
    font-weight: 700;
    margin-bottom: 1rem;
    padding-bottom: 6px;
    border-bottom: 1px solid var(--border);
  }

  .view-gallery {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 4px;
  }

  .view-gallery-item {
    aspect-ratio: 4/3;
    background: var(--border);
    overflow: hidden;
    position: relative;
  }

  .view-gallery-item img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s;
  }

  .view-gallery-item:hover img { transform: scale(1.1); }

  .view-skills {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }

  .view-skill {
    background: rgba(255,92,0,0.1);
    border: 1px solid rgba(255,92,0,0.3);
    color: var(--orange);
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.85rem;
    letter-spacing: 2px;
    text-transform: uppercase;
    padding: 6px 14px;
    font-weight: 700;
  }

  .view-certs {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
  }

  .view-cert {
    background: rgba(255,184,0,0.1);
    border: 1px solid rgba(255,184,0,0.3);
    color: var(--yellow);
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.85rem;
    letter-spacing: 1px;
    padding: 6px 14px;
    font-weight: 700;
  }

  .view-bio {
    color: var(--light);
    font-size: 1rem;
    line-height: 1.7;
    font-weight: 300;
  }

  /* SPECIALTY TYPES META SECTION  */
  .type-meta-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
  }

  .meta-card {
    background: var(--panel);
    border: 1px solid var(--border);
    padding: 1rem;
  }

  .meta-card-label {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.7rem;
    letter-spacing: 3px;
    color: var(--steel);
    text-transform: uppercase;
    margin-bottom: 4px;
    font-weight: 600;
  }

  .meta-card-value {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--white);
  }

  /* ‚Äî‚Äî‚Äî EMPTY STATE ‚Äî‚Äî‚Äî */
  .empty-state {
    text-align: center;
    padding: 6rem 2rem;
    color: var(--steel);
  }

  .empty-state-icon { font-size: 4rem; margin-bottom: 1rem; opacity: 0.5; }

  .empty-state h3 {
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 1.5rem;
    letter-spacing: 2px;
    margin-bottom: 0.5rem;
    color: var(--white);
  }

  /* ‚Äî‚Äî‚Äî FOOTER ‚Äî‚Äî‚Äî */
  footer {
    background: var(--panel);
    border-top: 1px solid var(--border);
    padding: 3rem 2rem;
    text-align: center;
    color: var(--steel);
    font-size: 0.85rem;
  }

  footer .footer-logo {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 1.8rem;
    letter-spacing: 4px;
    color: var(--white);
    margin-bottom: 0.5rem;
  }

  footer .footer-logo span { color: var(--orange); }

  /* ‚Äî‚Äî‚Äî TOAST ‚Äî‚Äî‚Äî */
  .toast {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    background: var(--orange);
    color: #000;
    padding: 1rem 1.5rem;
    font-family: 'Barlow Condensed', sans-serif;
    font-weight: 700;
    font-size: 1rem;
    letter-spacing: 2px;
    z-index: 9999;
    transform: translateY(100px);
    opacity: 0;
    transition: all 0.3s;
    clip-path: polygon(8px 0%, 100% 0%, calc(100% - 8px) 100%, 0% 100%);
  }

  .toast.show { transform: translateY(0); opacity: 1; }

  /* ‚Äî‚Äî‚Äî FIREBASE CONFIG NOTICE ‚Äî‚Äî‚Äî */
  .config-notice {
    background: rgba(255,184,0,0.08);
    border: 1px solid rgba(255,184,0,0.25);
    border-left: 4px solid var(--yellow);
    padding: 1rem 1.5rem;
    margin: 1rem 2rem;
    font-size: 0.85rem;
    color: var(--steel);
    font-family: 'Barlow Condensed', sans-serif;
    font-size: 0.9rem;
    letter-spacing: 0.5px;
  }

  .config-notice strong { color: var(--yellow); }
  .config-notice code {
    background: var(--panel);
    padding: 1px 6px;
    border-radius: 2px;
    font-size: 0.8rem;
    color: var(--orange);
  }

  /* ‚Äî‚Äî‚Äî RESPONSIVE ‚Äî‚Äî‚Äî */
  @media (max-width: 700px) {
    .form-grid { grid-template-columns: 1fr; }
    .form-group.full { grid-column: 1; }
    .work-photos-grid { grid-template-columns: repeat(3, 1fr); }
    .view-gallery { grid-template-columns: repeat(2, 1fr); }
    .view-modal-header { flex-direction: column; }
    .view-exp-badge { position: static; margin-top: -1rem; }
    .type-meta-grid { grid-template-columns: 1fr; }
    nav { display: none; }
    .profiles-grid { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<!-- HEADER -->
<header>
  <div class="logo">
    <div class="logo-icon">‚öô</div>
    <div class="logo-text">Gear<span>Head</span></div>
  </div>
  <nav>
    <a href="#profiles">Find a Pro</a>
    <a href="#" onclick="openCreateModal(); return false;">Create Profile</a>
    <a href="#about">About</a>
    <button class="btn-create" onclick="openCreateModal()">+ Add Your Profile</button>
  </nav>
</header>

<!-- HERO -->
<section class="hero">
  <p class="hero-eyebrow">// The Mechanic Network //</p>
  <h1>Find Verified<em>Automotive Pros</em></h1>
  <p>Discover real mechanics, tire techs, and automotive specialists. Every profile showcases hands-on experience, specialties, certifications, and actual work results.</p>
  <div class="hero-actions">
    <button class="btn-primary" onclick="document.getElementById('profiles').scrollIntoView({behavior:'smooth'})">Browse Mechanics</button>
    <button class="btn-secondary" onclick="openCreateModal()">Create Your Profile</button>
  </div>
</section>

<!-- STATS BAR -->
<div class="stats-bar">
  <div class="stat">
    <div class="stat-number" id="stat-profiles">0</div>
    <div class="stat-label">Verified Pros</div>
  </div>
  <div class="stat">
    <div class="stat-number">47</div>
    <div class="stat-label">Specialties</div>
  </div>
  <div class="stat">
    <div class="stat-number">100%</div>
    <div class="stat-label">Real Experience</div>
  </div>
  <div class="stat">
    <div class="stat-number">Free</div>
    <div class="stat-label">To Browse</div>
  </div>
</div>

<!-- FIREBASE CONFIG NOTICE -->
<div class="config-notice">
  <strong>‚ö° Firebase Setup:</strong> Replace the config in the <code>&lt;script&gt;</code> section with your Firebase project credentials. Also enable <strong>Firestore</strong> and <strong>Firebase Storage</strong> in your console. Profiles save in real-time automatically.
</div>

<!-- PROFILES SECTION -->
<section class="profiles-section" id="profiles">
  <div class="section-header">
    <div class="section-eyebrow">// Certified Professionals //</div>
    <div class="section-title">The Roster</div>
  </div>

  <!-- FILTER BAR -->
  <div class="filter-bar" id="filterBar">
    <button class="filter-btn active" onclick="filterProfiles(this, 'all')">All</button>
    <button class="filter-btn" onclick="filterProfiles(this, 'General Mechanic')">Mechanic</button>
    <button class="filter-btn" onclick="filterProfiles(this, 'Tire Technician')">Tire Tech</button>
    <button class="filter-btn" onclick="filterProfiles(this, 'Diesel Mechanic')">Diesel</button>
    <button class="filter-btn" onclick="filterProfiles(this, 'Auto Electrician')">Electrical</button>
    <button class="filter-btn" onclick="filterProfiles(this, 'Transmission Specialist')">Transmission</button>
    <button class="filter-btn" onclick="filterProfiles(this, 'Body & Paint')">Body & Paint</button>
    <button class="filter-btn" onclick="filterProfiles(this, 'Performance Tuner')">Performance</button>
  </div>

  <div class="profiles-grid" id="profilesGrid">
    <!-- Profiles render here -->
  </div>

  <div class="empty-state" id="emptyState" style="display:none">
    <div class="empty-state-icon">üîß</div>
    <h3>No Profiles Yet</h3>
    <p>Be the first to create your mechanic profile and get discovered.</p>
    <br>
    <button class="btn-primary" onclick="openCreateModal()">Create First Profile</button>
  </div>
</section>

<!-- FOOTER -->
<footer id="about">
  <div class="footer-logo">Gear<span>Head</span></div>
  <p>A platform built by gearheads, for gearheads. Showcase your craft, earn trust.</p>
</footer>

<!-- ========================================
     CREATE PROFILE MODAL
     ======================================== -->
<div class="modal-overlay" id="createModal">
  <div class="modal form-modal">
    <button class="modal-close" onclick="closeCreateModal()">‚úï</button>

    <div class="modal-top-bar">
      <div style="font-size:1.8rem">‚öô</div>
      <h2>Create Your Professional Profile</h2>
    </div>

    <div class="modal-body">

      <!-- PERSONAL INFO -->
      <div class="form-section">
        <div class="form-section-title">Personal Information</div>
        <div class="form-grid">
          <div class="form-group">
            <label>First Name *</label>
            <input type="text" id="f_firstName" placeholder="Marcus">
          </div>
          <div class="form-group">
            <label>Last Name *</label>
            <input type="text" id="f_lastName" placeholder="Torres">
          </div>
          <div class="form-group">
            <label>City / Location *</label>
            <input type="text" id="f_city" placeholder="Chicago, IL">
          </div>
          <div class="form-group">
            <label>Phone (optional)</label>
            <input type="tel" id="f_phone" placeholder="(555) 000-0000">
          </div>
          <div class="form-group">
            <label>Email *</label>
            <input type="email" id="f_email" placeholder="you@shop.com">
          </div>
          <div class="form-group">
            <label>Shop / Company Name</label>
            <input type="text" id="f_shop" placeholder="Torres Auto Works">
          </div>
        </div>
      </div>

      <!-- PROFILE PHOTO -->
      <div class="form-section">
        <div class="form-section-title">Profile Photo</div>
        <div class="profile-photo-row">
          <div class="photo-upload-main" id="mainPhotoUpload" onclick="document.getElementById('mainPhotoInput').click()">
            <div class="upload-icon">üë§</div>
            <div class="photo-upload-text">Click to Upload</div>
            <input type="file" id="mainPhotoInput" accept="image/*" style="display:none" onchange="previewMainPhoto(this)">
          </div>
          <div class="profile-photo-info">
            <p>Upload a clear, professional headshot or photo of you working. This is the first thing people see ‚Äî make it count.</p>
            <p style="color: var(--orange); font-size:0.85rem;">Recommended: Square format, minimum 400√ó400px</p>
          </div>
        </div>
      </div>

      <!-- WORK PHOTOS -->
      <div class="form-section">
        <div class="form-section-title">Work Gallery (Up to 6 Photos)</div>
        <p style="color:var(--steel); font-size:0.9rem; margin-bottom:1rem;">Showcase your best work ‚Äî engine bays, tires, diagnostics, finished jobs, anything that shows your skill and results.</p>
        <div class="work-photos-grid" id="workPhotosGrid">
          <!-- Slots rendered by JS -->
        </div>
      </div>

      <!-- ROLE / SPECIALTY TYPE -->
      <div class="form-section">
        <div class="form-section-title">Primary Role *</div>
        <div class="form-group full">
          <label>What best describes your primary specialty?</label>
          <select id="f_role" onchange="updateRoleDetails()">
            <option value="">‚Äî Select your role ‚Äî</option>
            <option value="General Mechanic">General Mechanic</option>
            <option value="Tire Technician">Tire Technician</option>
            <option value="Diesel Mechanic">Diesel Mechanic</option>
            <option value="Auto Electrician">Auto Electrician / Diagnostic Tech</option>
            <option value="Transmission Specialist">Transmission Specialist</option>
            <option value="Body & Paint">Body & Paint Technician</option>
            <option value="Performance Tuner">Performance Tuner / Builder</option>
            <option value="HVAC Specialist">HVAC / A/C Specialist</option>
            <option value="Alignment Specialist">Alignment & Suspension Specialist</option>
            <option value="Heavy Equipment">Heavy Equipment Mechanic</option>
            <option value="Motorcycle Mechanic">Motorcycle Mechanic</option>
            <option value="Fleet Mechanic">Fleet / Commercial Mechanic</option>
          </select>
        </div>
      </div>

      <!-- EXPERIENCE & DETAILS -->
      <div class="form-section">
        <div class="form-section-title">Experience & Details</div>
        <div class="form-grid">
          <div class="form-group">
            <label>Years of Experience *</label>
            <input type="number" id="f_years" min="0" max="60" placeholder="8">
          </div>
          <div class="form-group">
            <label>Hourly Rate (optional)</label>
            <input type="text" id="f_rate" placeholder="e.g. $85/hr or Shop Rate">
          </div>
          <div class="form-group">
            <label>Vehicle Types You Work On</label>
            <input type="text" id="f_vehicles" placeholder="Domestic, Import, European, Trucks...">
          </div>
          <div class="form-group">
            <label>Current Employment Status</label>
            <select id="f_status">
              <option value="Independent">Independent / Freelance</option>
              <option value="Shop Employee">Shop Employee</option>
              <option value="Shop Owner">Shop Owner</option>
              <option value="Dealership">Dealership Technician</option>
              <option value="Fleet">Fleet Mechanic</option>
              <option value="Mobile">Mobile Mechanic</option>
            </select>
          </div>
        </div>
        <div class="form-group full" style="margin-top:1rem">
          <label>Bio / About You</label>
          <textarea id="f_bio" placeholder="Tell the public about yourself ‚Äî how you got into the trade, your philosophy, what sets you apart, proudest repairs..."></textarea>
        </div>
      </div>

      <!-- SKILL SPECIALTIES -->
      <div class="form-section">
        <div class="form-section-title">Skill Specialties (select all that apply)</div>
        <div class="checkbox-grid" id="skillCheckboxes">
          <!-- Rendered by JS -->
        </div>
      </div>

      <!-- CERTIFICATIONS -->
      <div class="form-section">
        <div class="form-section-title">Certifications & Training</div>
        <div class="cert-input-row">
          <input type="text" id="certInput" placeholder="e.g. ASE Certified, Snap-on Training, Bridgestone Cert...">
          <button class="btn-add" onclick="addCert()">+ Add</button>
        </div>
        <div class="cert-tags" id="certTags"></div>
      </div>

      <!-- SUBMIT -->
      <div class="form-submit">
        <button class="btn-cancel" onclick="closeCreateModal()">Cancel</button>
        <button class="btn-publish" onclick="submitProfile()">‚¨Ü Publish Profile</button>
      </div>
    </div>
  </div>
</div>

<!-- ========================================
     VIEW PROFILE MODAL
     ======================================== -->
<div class="modal-overlay" id="viewModal">
  <div class="modal" style="max-width:800px;">
    <button class="modal-close" onclick="closeViewModal()">‚úï</button>
    <div id="viewModalContent"></div>
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<!-- ========================================
     FIREBASE + APP SCRIPTS
     ======================================== -->
<script type="module">
  // =====================================================
  // üî• FIREBASE CONFIG ‚Äî REPLACE WITH YOUR CREDENTIALS
  // =====================================================
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
  import { getFirestore, collection, addDoc, getDocs, query, orderBy, serverTimestamp }
    from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';
  import { getStorage, ref, uploadBytes, getDownloadURL }
    from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js';

  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT.firebaseapp.com",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_PROJECT.appspot.com",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };

  let db, storage, firebaseReady = false;

  try {
    const app = initializeApp(firebaseConfig);
    db = getFirestore(app);
    storage = getStorage(app);
    firebaseReady = true;
    loadProfiles();
  } catch(e) {
    console.warn('Firebase not configured:', e.message);
    loadDemoProfiles();
  }

  // =====================================================
  // APP STATE
  // =====================================================
  let profiles = [];
  let certifications = [];
  let selectedSkills = [];
  let workPhotoFiles = [null, null, null, null, null, null];
  let mainPhotoFile = null;
  let currentFilter = 'all';

  window.mainPhotoFile = null;

  // ALL SKILLS
  const ALL_SKILLS = [
    'Engine Diagnostics','Engine Rebuilds','Oil & Fluid Services','Brake Systems',
    'Tire Mounting','Tire Balancing','Wheel Alignment','Suspension & Steering',
    'Exhaust Systems','Transmission Rebuild','CVT Service','Manual Transmission',
    'Automatic Transmission','Clutch Replacement','Differential Service',
    'Electrical Diagnostics','ECU Tuning / Flashing','Wiring Harness Repair',
    'AC Repair & Recharge','Cooling System','Radiator Service','Heating Systems',
    'Diesel Injection Systems','Turbo / Supercharger','Fuel System Service',
    'Carburetor Rebuild','EV / Hybrid Service','Welding & Fabrication',
    'Rust Repair','Dent Removal / PDR','Paint & Body','Frame Straightening',
    'Headliner / Interior','Window Tint','Detailing','Performance Upgrades',
    'Lift Kits / Leveling','Big Rig Service','Fleet Maintenance',
    'Pre-purchase Inspection','State Emissions','Smog Check',
    'Custom Exhaust Fabrication','Nitrous Systems','Roll Cage Fabrication',
  ];

  // =====================================================
  // INIT WORK PHOTO GRID
  // =====================================================
  function initWorkPhotoGrid() {
    const grid = document.getElementById('workPhotosGrid');
    grid.innerHTML = '';
    for (let i = 0; i < 6; i++) {
      const slot = document.createElement('div');
      slot.className = 'work-photo-upload';
      slot.id = `workSlot_${i}`;
      slot.innerHTML = `
        <div class="upload-icon">üì∑</div>
        <div class="upload-num">PHOTO ${i + 1}</div>
        <input type="file" id="workInput_${i}" accept="image/*" style="display:none">
      `;
      slot.onclick = () => document.getElementById(`workInput_${i}`).click();
      grid.appendChild(slot);
      document.getElementById(`workInput_${i}`).addEventListener('change', function() {
        previewWorkPhoto(this, i);
      });
    }
  }

  // INIT SKILL CHECKBOXES
  function initSkillCheckboxes() {
    const container = document.getElementById('skillCheckboxes');
    container.innerHTML = '';
    ALL_SKILLS.forEach(skill => {
      const item = document.createElement('div');
      item.className = 'checkbox-item';
      item.dataset.skill = skill;
      item.innerHTML = `
        <div class="check-box"></div>
        <div class="check-label">${skill}</div>
      `;
      item.onclick = () => toggleSkill(item, skill);
      container.appendChild(item);
    });
  }

  window.toggleSkill = function(el, skill) {
    el.classList.toggle('checked');
    if (el.classList.contains('checked')) {
      el.querySelector('.check-box').textContent = '‚úì';
      if (!selectedSkills.includes(skill)) selectedSkills.push(skill);
    } else {
      el.querySelector('.check-box').textContent = '';
      selectedSkills = selectedSkills.filter(s => s !== skill);
    }
  };

  // =====================================================
  // PHOTO PREVIEWS
  // =====================================================
  window.previewMainPhoto = function(input) {
    if (!input.files[0]) return;
    mainPhotoFile = input.files[0];
    const reader = new FileReader();
    reader.onload = e => {
      const wrap = document.getElementById('mainPhotoUpload');
      let img = wrap.querySelector('img');
      if (!img) { img = document.createElement('img'); wrap.appendChild(img); }
      img.src = e.target.result;
      wrap.querySelector('.upload-icon').style.display = 'none';
      wrap.querySelector('.photo-upload-text').style.display = 'none';
    };
    reader.readAsDataURL(input.files[0]);
  };

  function previewWorkPhoto(input, index) {
    if (!input.files[0]) return;
    workPhotoFiles[index] = input.files[0];
    const reader = new FileReader();
    reader.onload = e => {
      const slot = document.getElementById(`workSlot_${index}`);
      let img = slot.querySelector('img');
      if (!img) { img = document.createElement('img'); slot.appendChild(img); }
      img.src = e.target.result;
      slot.querySelector('.upload-icon').style.display = 'none';
      slot.querySelector('.upload-num').style.display = 'none';
    };
    reader.readAsDataURL(input.files[0]);
  }

  // =====================================================
  // CERTIFICATIONS
  // =====================================================
  window.addCert = function() {
    const input = document.getElementById('certInput');
    const val = input.value.trim();
    if (!val) return;
    certifications.push(val);
    renderCertTags();
    input.value = '';
  };

  document.getElementById('certInput').addEventListener('keydown', e => {
    if (e.key === 'Enter') window.addCert();
  });

  function renderCertTags() {
    const container = document.getElementById('certTags');
    container.innerHTML = certifications.map((c, i) => `
      <div class="cert-tag">üèÖ ${c}
        <span class="remove" onclick="removeCert(${i})">‚úï</span>
      </div>
    `).join('');
  }

  window.removeCert = function(i) {
    certifications.splice(i, 1);
    renderCertTags();
  };

  // =====================================================
  // SUBMIT PROFILE
  // =====================================================
  window.submitProfile = async function() {
    const firstName = document.getElementById('f_firstName').value.trim();
    const lastName = document.getElementById('f_lastName').value.trim();
    const email = document.getElementById('f_email').value.trim();
    const city = document.getElementById('f_city').value.trim();
    const role = document.getElementById('f_role').value;
    const years = parseInt(document.getElementById('f_years').value);

    if (!firstName || !lastName || !email || !city || !role || isNaN(years)) {
      showToast('‚ö† Please fill in all required fields');
      return;
    }

    const btn = document.querySelector('.btn-publish');
    btn.textContent = 'Uploading...';
    btn.style.opacity = '0.7';
    btn.disabled = true;

    let profilePhotoURL = '';
    const workPhotoURLs = [];

    if (firebaseReady) {
      // Upload profile photo
      if (mainPhotoFile) {
        const snap = await uploadBytes(ref(storage, `profiles/${Date.now()}_main`), mainPhotoFile);
        profilePhotoURL = await getDownloadURL(snap.ref);
      }
      // Upload work photos
      for (let i = 0; i < 6; i++) {
        if (workPhotoFiles[i]) {
          const snap = await uploadBytes(ref(storage, `profiles/${Date.now()}_work_${i}`), workPhotoFiles[i]);
          workPhotoURLs.push(await getDownloadURL(snap.ref));
        } else {
          workPhotoURLs.push('');
        }
      }
    } else {
      // Demo mode ‚Äî use placeholder images
      profilePhotoURL = '';
      for (let i = 0; i < 6; i++) workPhotoURLs.push('');
    }

    const profile = {
      firstName,
      lastName,
      email,
      city,
      phone: document.getElementById('f_phone').value.trim(),
      shop: document.getElementById('f_shop').value.trim(),
      role,
      years,
      rate: document.getElementById('f_rate').value.trim(),
      vehicles: document.getElementById('f_vehicles').value.trim(),
      status: document.getElementById('f_status').value,
      bio: document.getElementById('f_bio').value.trim(),
      skills: [...selectedSkills],
      certifications: [...certifications],
      profilePhotoURL,
      workPhotoURLs,
      createdAt: firebaseReady ? serverTimestamp() : new Date().toISOString(),
    };

    if (firebaseReady) {
      try {
        await addDoc(collection(db, 'profiles'), profile);
        showToast('‚úì Profile published successfully!');
      } catch(e) {
        console.error(e);
        showToast('Error saving to database');
      }
    } else {
      // Demo mode
      profile.id = Date.now().toString();
      profiles.unshift(profile);
      renderProfiles(profiles);
      document.getElementById('stat-profiles').textContent = profiles.length;
    }

    btn.textContent = '‚¨Ü Publish Profile';
    btn.style.opacity = '1';
    btn.disabled = false;
    closeCreateModal();
    resetForm();

    if (firebaseReady) loadProfiles();
  };

  // =====================================================
  // LOAD PROFILES
  // =====================================================
  async function loadProfiles() {
    if (!firebaseReady) return;
    const q = query(collection(db, 'profiles'), orderBy('createdAt', 'desc'));
    const snap = await getDocs(q);
    profiles = snap.docs.map(d => ({ id: d.id, ...d.data() }));
    renderProfiles(profiles);
    document.getElementById('stat-profiles').textContent = profiles.length;
  }

  function loadDemoProfiles() {
    profiles = DEMO_PROFILES;
    renderProfiles(profiles);
    document.getElementById('stat-profiles').textContent = profiles.length;
  }

  // =====================================================
  // RENDER PROFILES
  // =====================================================
  function renderProfiles(list) {
    const grid = document.getElementById('profilesGrid');
    const empty = document.getElementById('emptyState');

    const filtered = currentFilter === 'all' ? list : list.filter(p => p.role === currentFilter);

    if (filtered.length === 0) {
      grid.innerHTML = '';
      empty.style.display = 'block';
      return;
    }

    empty.style.display = 'none';
    grid.innerHTML = filtered.map((p, i) => buildCard(p, i)).join('');

    // Animate in
    grid.querySelectorAll('.profile-card').forEach((card, i) => {
      card.style.opacity = 0;
      card.style.transform = 'translateY(20px)';
      setTimeout(() => {
        card.style.transition = 'opacity 0.4s, transform 0.4s';
        card.style.opacity = 1;
        card.style.transform = 'translateY(0)';
      }, i * 60);
    });
  }

  function buildCard(p, i) {
    const initials = (p.firstName[0] + p.lastName[0]).toUpperCase();
    const skills = (p.skills || []).slice(0, 4);
    const photos = p.workPhotoURLs || [];

    const galleryHtml = Array.from({length: 6}).map((_, gi) => {
      const url = photos[gi];
      return `<div class="gallery-thumb">
        ${url
          ? `<img src="${url}" alt="Work photo ${gi+1}" loading="lazy">`
          : `<div class="gallery-placeholder">üîß</div>`}
      </div>`;
    }).join('');

    const avatarHtml = p.profilePhotoURL
      ? `<img class="avatar" src="${p.profilePhotoURL}" alt="${p.firstName}">`
      : `<div class="avatar">${initials}</div>`;

    return `
      <div class="profile-card" onclick="openProfile('${p.id || i}')">
        <div class="card-overlay"></div>
        <div class="card-header">
          ${avatarHtml}
          <div class="card-info">
            <div class="card-name">${p.firstName} ${p.lastName}</div>
            <div class="card-role">${p.role}</div>
            <div class="card-location">üìç ${p.city}</div>
          </div>
          <div class="experience-badge">${p.years} YRS</div>
        </div>
        <div class="card-skills">
          ${skills.map(s => `<div class="skill-tag">${s}</div>`).join('')}
          ${(p.skills||[]).length > 4 ? `<div class="skill-tag">+${p.skills.length - 4} more</div>` : ''}
        </div>
        <div class="card-gallery">${galleryHtml}</div>
        <div class="card-footer">
          <div class="card-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ ${p.status || 'Pro'}</div>
          <div class="card-cta">View Profile ‚Üí</div>
        </div>
      </div>
    `;
  }

  // =====================================================
  // OPEN PROFILE VIEW
  // =====================================================
  window.openProfile = function(id) {
    const p = profiles.find(pr => (pr.id || '') === id) || profiles[parseInt(id)] || profiles[0];
    if (!p) return;

    const initials = (p.firstName[0] + p.lastName[0]).toUpperCase();
    const photos = (p.workPhotoURLs || []).filter(Boolean);

    const galleryHtml = photos.map(url => `
      <div class="view-gallery-item">
        <img src="${url}" alt="Work photo">
      </div>
    `).join('') || '<p style="color:var(--steel); font-size:0.9rem;">No work photos uploaded yet.</p>';

    const avatarHtml = p.profilePhotoURL
      ? `<img class="view-avatar" src="${p.profilePhotoURL}" alt="${p.firstName}">`
      : `<div class="view-avatar">${initials}</div>`;

    document.getElementById('viewModalContent').innerHTML = `
      <div class="view-modal-header">
        ${avatarHtml}
        <div class="view-header-info">
          <div class="view-name">${p.firstName} ${p.lastName}</div>
          <div class="view-role">${p.role}</div>
          <div class="view-meta">
            <span class="view-meta-item">üìç ${p.city}</span>
            ${p.shop ? `<span class="view-meta-item">üè™ ${p.shop}</span>` : ''}
            ${p.rate ? `<span class="view-meta-item">üí∞ ${p.rate}</span>` : ''}
            <span class="view-meta-item">üîß ${p.status}</span>
          </div>
        </div>
        <div class="view-exp-badge">
          ${p.years}
          <span class="view-exp-label">Years Experience</span>
        </div>
      </div>
      <div class="view-body">
        ${p.bio ? `
          <div class="view-section">
            <div class="view-section-title">About</div>
            <div class="view-bio">${p.bio}</div>
          </div>
        ` : ''}

        <div class="view-section">
          <div class="view-section-title">Details</div>
          <div class="type-meta-grid">
            <div class="meta-card">
              <div class="meta-card-label">Primary Role</div>
              <div class="meta-card-value">${p.role}</div>
            </div>
            <div class="meta-card">
              <div class="meta-card-label">Years in Trade</div>
              <div class="meta-card-value">${p.years} Years</div>
            </div>
            <div class="meta-card">
              <div class="meta-card-label">Employment Status</div>
              <div class="meta-card-value">${p.status}</div>
            </div>
            ${p.vehicles ? `<div class="meta-card">
              <div class="meta-card-label">Vehicles Worked On</div>
              <div class="meta-card-value">${p.vehicles}</div>
            </div>` : ''}
          </div>
        </div>

        ${(p.skills||[]).length > 0 ? `
          <div class="view-section">
            <div class="view-section-title">Skill Specialties (${p.skills.length})</div>
            <div class="view-skills">
              ${p.skills.map(s => `<div class="view-skill">${s}</div>`).join('')}
            </div>
          </div>
        ` : ''}

        ${(p.certifications||[]).length > 0 ? `
          <div class="view-section">
            <div class="view-section-title">Certifications & Training</div>
            <div class="view-certs">
              ${p.certifications.map(c => `<div class="view-cert">üèÖ ${c}</div>`).join('')}
            </div>
          </div>
        ` : ''}

        ${photos.length > 0 ? `
          <div class="view-section">
            <div class="view-section-title">Work Gallery (${photos.length} Photos)</div>
            <div class="view-gallery">${galleryHtml}</div>
          </div>
        ` : ''}

        ${p.phone || p.email ? `
          <div class="view-section">
            <div class="view-section-title">Contact</div>
            <div class="view-meta" style="gap:1rem;">
              ${p.phone ? `<span>üìû ${p.phone}</span>` : ''}
              ${p.email ? `<span>‚úâ ${p.email}</span>` : ''}
            </div>
          </div>
        ` : ''}
      </div>
    `;

    document.getElementById('viewModal').classList.add('open');
    document.body.style.overflow = 'hidden';
  };

  // =====================================================
  // FILTER
  // =====================================================
  window.filterProfiles = function(btn, category) {
    currentFilter = category;
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    renderProfiles(profiles);
  };

  // =====================================================
  // MODAL CONTROLS
  // =====================================================
  window.openCreateModal = function() {
    initWorkPhotoGrid();
    initSkillCheckboxes();
    certifications = [];
    selectedSkills = [];
    workPhotoFiles = [null,null,null,null,null,null];
    mainPhotoFile = null;
    document.getElementById('mainPhotoUpload').querySelector('.upload-icon').style.display = '';
    document.getElementById('mainPhotoUpload').querySelector('.photo-upload-text').style.display = '';
    const existingImg = document.getElementById('mainPhotoUpload').querySelector('img');
    if (existingImg) existingImg.remove();
    document.getElementById('createModal').classList.add('open');
    document.body.style.overflow = 'hidden';
  };

  window.closeCreateModal = function() {
    document.getElementById('createModal').classList.remove('open');
    document.body.style.overflow = '';
  };

  window.closeViewModal = function() {
    document.getElementById('viewModal').classList.remove('open');
    document.body.style.overflow = '';
  };

  // Close on backdrop click
  document.getElementById('createModal').addEventListener('click', e => {
    if (e.target === document.getElementById('createModal')) window.closeCreateModal();
  });
  document.getElementById('viewModal').addEventListener('click', e => {
    if (e.target === document.getElementById('viewModal')) window.closeViewModal();
  });

  function resetForm() {
    ['f_firstName','f_lastName','f_email','f_city','f_phone','f_shop','f_years','f_rate','f_vehicles','f_bio'].forEach(id => {
      document.getElementById(id).value = '';
    });
    document.getElementById('f_role').value = '';
    document.getElementById('f_status').value = 'Independent';
  }

  window.updateRoleDetails = function() {};

  // =====================================================
  // TOAST
  // =====================================================
  function showToast(msg) {
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.classList.add('show');
    setTimeout(() => t.classList.remove('show'), 3500);
  }
  window.showToast = showToast;

  // =====================================================
  // DEMO PROFILES (shown when Firebase isn't configured)
  // =====================================================
  const DEMO_PROFILES = [
    {
      id: '0',
      firstName: 'Marcus', lastName: 'Torres',
      city: 'Chicago, IL', shop: 'Torres Auto Works',
      role: 'General Mechanic', years: 18,
      status: 'Shop Owner', rate: '$90/hr',
      vehicles: 'Domestic, Import, Light Trucks',
      bio: 'I started wrenching at 16 in my uncle\'s shop and never stopped. 18 years later I own my own place and specialize in full engine rebuilds and diagnostics. Every car that leaves my shop gets treated like it\'s my own.',
      skills: ['Engine Rebuilds','Engine Diagnostics','Brake Systems','Transmission Rebuild','Clutch Replacement','Electrical Diagnostics','Fuel System Service','Cooling System'],
      certifications: ['ASE Master Technician', 'Snap-on Diagnostics Certified'],
      profilePhotoURL: '',
      workPhotoURLs: ['','','','','',''],
    },
    {
      id: '1',
      firstName: 'Dee', lastName: 'Jackson',
      city: 'Dallas, TX', shop: 'Precision Tire & Wheel',
      role: 'Tire Technician', years: 11,
      status: 'Shop Employee', rate: 'Shop Rate',
      vehicles: 'All Passenger Vehicles, SUVs, Light Trucks',
      bio: 'Tire specialist with 11 years running high-volume mount and balance. I can mount any tire from your daily driver to a track-day setup. I do alignment too ‚Äî I check every car that comes through.',
      skills: ['Tire Mounting','Tire Balancing','Wheel Alignment','Suspension & Steering','Brake Systems','TPMS Service'],
      certifications: ['Bridgestone Certified', 'Hunter Engineering Alignment Cert'],
      profilePhotoURL: '',
      workPhotoURLs: ['','','','','',''],
    },
    {
      id: '2',
      firstName: 'Ray', lastName: 'Okonkwo',
      city: 'Detroit, MI', shop: '',
      role: 'Performance Tuner', years: 9,
      status: 'Independent', rate: 'Project Quote',
      vehicles: 'Domestic Muscle, Import JDM',
      bio: 'I build fast cars. From bolt-ons to full turbo builds ‚Äî I tune on a Dyno and I only release cars when the numbers prove out. I\'ve built multiple 10-second street cars and countless track machines.',
      skills: ['ECU Tuning / Flashing','Turbo / Supercharger','Nitrous Systems','Performance Upgrades','Custom Exhaust Fabrication','Welding & Fabrication','Engine Rebuilds'],
      certifications: ['Haltech Pro Tuner Certified', 'Dynojet Certified Operator'],
      profilePhotoURL: '',
      workPhotoURLs: ['','','','','',''],
    },
    {
      id: '3',
      firstName: 'Sofia', lastName: 'Reyes',
      city: 'Phoenix, AZ', shop: 'Desert Diesel & Fleet',
      role: 'Diesel Mechanic', years: 14,
      status: 'Shop Owner', rate: '$110/hr',
      vehicles: 'Semi Trucks, Commercial Fleet, Pickup Trucks',
      bio: 'Diesel is what I breathe. I run my own shop servicing fleets, owner-operators, and pickup truck owners. Specializing in Cummins, Duramax, and Powerstroke. DPF delete, regen issues, injectors ‚Äî I\'ve seen it all.',
      skills: ['Diesel Injection Systems','Turbo / Supercharger','Engine Diagnostics','Electrical Diagnostics','Fleet Maintenance','Engine Rebuilds','Fuel System Service'],
      certifications: ['Cummins Factory Certified','ASE L2 Diesel Electronic Systems'],
      profilePhotoURL: '',
      workPhotoURLs: ['','','','','',''],
    }
  ];

  // Init
  loadDemoProfiles();

</script>

</body>
</html>
