<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vehicle Alignment Test</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            color: white;
        }

        .container {
            max-width: 800px;
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        h1 {
            text-align: center;
            font-size: 2.5rem;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .user-input {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
        }

        input[type="text"] {
            padding: 12px 20px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            font-size: 16px;
            min-width: 200px;
            transition: all 0.3s ease;
        }

        input[type="text"]:focus {
            outline: none;
            background: white;
            transform: scale(1.05);
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .game-area {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            min-height: 400px;
            position: relative;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .alignment-track {
            width: 100%;
            height: 200px;
            background: linear-gradient(90deg, #333, #666, #333);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            margin-bottom: 30px;
            border: 3px solid #444;
        }

        .center-line {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 4px;
            background: #ffff00;
            transform: translateX(-50%);
            box-shadow: 0 0 10px #ffff00;
        }

        .vehicle {
            position: absolute;
            top: 50%;
            width: 80px;
            height: 40px;
            background: linear-gradient(45deg, #ff4757, #ff3742);
            border-radius: 8px;
            transform: translateY(-50%);
            transition: left 0.1s ease;
            border: 2px solid #fff;
            box-shadow: 0 0 15px rgba(255, 71, 87, 0.5);
        }

        .vehicle::before {
            content: 'üöó';
            position: absolute;
            font-size: 30px;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(45deg, #54a0ff, #2e86de);
            color: white;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: bold;
            min-width: 120px;
        }

        .control-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(84, 160, 255, 0.4);
        }

        .control-btn:active {
            transform: scale(0.95);
        }

        .score-display {
            text-align: center;
            font-size: 24px;
            margin: 20px 0;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .leaderboard {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
        }

        .leaderboard h3 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.5rem;
            color: #ffff00;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .score-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            margin: 10px 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            border-left: 4px solid #ffff00;
            transition: all 0.3s ease;
        }

        .score-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
        }

        .instructions {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
        }

        .game-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .timer {
            font-size: 20px;
            font-weight: bold;
            color: #ffff00;
        }

        .accuracy {
            font-size: 18px;
            color: #00ff88;
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .control-btn {
                min-width: 200px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöó Vehicle Alignment Test</h1>
        
        <div class="instructions">
            <p><strong>Instructions:</strong> Use the Left/Right buttons to align your vehicle with the yellow center line. You have 30 seconds to get as many perfect alignments as possible. The closer you are to perfect alignment, the more points you score!</p>
        </div>

        <div class="user-input">
            <input type="text" id="usernameInput" placeholder="Enter your username" maxlength="20">
            <button class="btn" onclick="startGame()">Start Game</button>
        </div>

        <div class="game-area">
            <div class="game-info">
                <div class="timer" id="timer">Time: 30s</div>
                <div class="accuracy" id="accuracy">Accuracy: 0%</div>
                <div class="score-display" id="currentScore">Score: 0</div>
            </div>
            
            <div class="alignment-track">
                <div class="center-line"></div>
                <div class="vehicle" id="vehicle"></div>
            </div>
            
            <div class="controls">
                <button class="control-btn" id="leftBtn" onclick="moveVehicle('left')" disabled>‚¨Ö Left</button>
                <button class="control-btn" onclick="testAlignment()" id="testBtn" disabled>üéØ Test Alignment</button>
                <button class="control-btn" id="rightBtn" onclick="moveVehicle('right')" disabled>‚û° Right</button>
            </div>
        </div>

        <div class="leaderboard">
            <h3>üèÜ High Scores</h3>
            <div id="scoresList">
                <div class="score-item">
                    <span>No scores yet - be the first!</span>
                    <span>0</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        let gameActive = false;
        let currentScore = 0;
        let vehiclePosition = 50; // percentage from left
        let timeLeft = 30;
        let gameTimer;
        let scores = {};
        let currentUsername = '';
        let totalTests = 0;
        let accurateTests = 0;

        // Load scores from memory
        function loadScores() {
            // In a real application, this would load from a database
            // For now, scores are stored in memory during the session
            updateLeaderboard();
        }

        function updateLeaderboard() {
            const scoresList = document.getElementById('scoresList');
            const sortedScores = Object.entries(scores).sort((a, b) => b[1] - a[1]);
            
            if (sortedScores.length === 0) {
                scoresList.innerHTML = '<div class="score-item"><span>No scores yet - be the first!</span><span>0</span></div>';
                return;
            }
            
            scoresList.innerHTML = '';
            sortedScores.forEach(([username, score], index) => {
                const scoreItem = document.createElement('div');
                scoreItem.className = 'score-item';
                scoreItem.innerHTML = `
                    <span>${index + 1}. ${username}</span>
                    <span>${score} pts</span>
                `;
                scoresList.appendChild(scoreItem);
            });
        }

        function startGame() {
            const usernameInput = document.getElementById('usernameInput');
            const username = usernameInput.value.trim();
            
            if (!username) {
                alert('Please enter a username!');
                return;
            }
            
            currentUsername = username;
            gameActive = true;
            currentScore = 0;
            vehiclePosition = Math.random() * 80 + 10; // Random start position
            timeLeft = 30;
            totalTests = 0;
            accurateTests = 0;
            
            // Enable game controls
            document.getElementById('leftBtn').disabled = false;
            document.getElementById('rightBtn').disabled = false;
            document.getElementById('testBtn').disabled = false;
            
            // Update displays
            updateVehiclePosition();
            updateScore();
            updateAccuracy();
            
            // Start timer
            gameTimer = setInterval(() => {
                timeLeft--;
                document.getElementById('timer').textContent = `Time: ${timeLeft}s`;
                
                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
        }

        function endGame() {
            gameActive = false;
            clearInterval(gameTimer);
            
            // Disable controls
            document.getElementById('leftBtn').disabled = true;
            document.getElementById('rightBtn').disabled = true;
            document.getElementById('testBtn').disabled = true;
            
            // Update high score if necessary
            if (!scores[currentUsername] || currentScore > scores[currentUsername]) {
                scores[currentUsername] = currentScore;
                alert(`Game Over! New high score for ${currentUsername}: ${currentScore} points!`);
            } else {
                alert(`Game Over! Your score: ${currentScore} points. Your high score remains: ${scores[currentUsername]} points.`);
            }
            
            updateLeaderboard();
        }

        function moveVehicle(direction) {
            if (!gameActive) return;
            
            if (direction === 'left') {
                vehiclePosition = Math.max(0, vehiclePosition - 2);
            } else if (direction === 'right') {
                vehiclePosition = Math.min(90, vehiclePosition + 2);
            }
            
            updateVehiclePosition();
        }

        function updateVehiclePosition() {
            const vehicle = document.getElementById('vehicle');
            vehicle.style.left = vehiclePosition + '%';
        }

        function testAlignment() {
            if (!gameActive) return;
            
            totalTests++;
            const perfectCenter = 50;
            const difference = Math.abs(vehiclePosition - perfectCenter);
            
            let points = 0;
            let feedback = '';
            
            if (difference === 0) {
                points = 100;
                feedback = 'Perfect! üéØ';
                accurateTests++;
            } else if (difference <= 1) {
                points = 80;
                feedback = 'Excellent! ‚≠ê';
                accurateTests++;
            } else if (difference <= 3) {
                points = 60;
                feedback = 'Good! üëç';
            } else if (difference <= 5) {
                points = 40;
                feedback = 'Close! üëå';
            } else if (difference <= 10) {
                points = 20;
                feedback = 'Not bad! üìè';
            } else {
                points = 5;
                feedback = 'Try again! üé™';
            }
            
            currentScore += points;
            updateScore();
            updateAccuracy();
            
            // Show feedback briefly
            const testBtn = document.getElementById('testBtn');
            const originalText = testBtn.textContent;
            testBtn.textContent = feedback;
            setTimeout(() => {
                testBtn.textContent = originalText;
            }, 1000);
            
            // Move vehicle to new random position for next test
            vehiclePosition = Math.random() * 80 + 10;
            updateVehiclePosition();
        }

        function updateScore() {
            document.getElementById('currentScore').textContent = `Score: ${currentScore}`;
        }

        function updateAccuracy() {
            const accuracy = totalTests > 0 ? Math.round((accurateTests / totalTests) * 100) : 0;
            document.getElementById('accuracy').textContent = `Accuracy: ${accuracy}%`;
        }

        // Keyboard controls
        document.addEventListener('keydown', (event) => {
            if (!gameActive) return;
            
            switch(event.key) {
                case 'ArrowLeft':
                case 'a':
                case 'A':
                    moveVehicle('left');
                    break;
                case 'ArrowRight':
                case 'd':
                case 'D':
                    moveVehicle('right');
                    break;
                case ' ':
                case 'Enter':
                    event.preventDefault();
                    testAlignment();
                    break;
            }
        });

        // Initialize
        loadScores();
        updateVehiclePosition();
    </script>
</body>
</html>
